function ajaxGet(e,t){var n=(new Date).getTime();e=e+"&ts"+n;xmlHttp=new XMLHttpRequest;xmlHttp.open("GET",e,true);xmlHttp.onreadystatechange=function(){if(xmlHttp.readyState==4){if(t){t(JSON.parse(xmlHttp.responseText))}}};xmlHttp.send(null)}var SlimUI=function(){this.version="0.0.4";this.config={pollingInterval:5e3};this.init();this.pollValues();var e=this;setInterval(function(){e.pollValues()},this.config.pollingInterval)};SlimUI.prototype={dps:[],dpElems:[],init:function(){this.getElements(document)},getElements:function(e){var t=e.getElementsByTagName("*");var n=0;for(var r=0,i=t.length;r<i;r++){var s=t[r];if(s.getAttribute("data-dp")){if(!s.getAttribute("id")){s.setAttribute("id","slim"+n++)}var o={id:s.getAttribute("id"),dp:s.getAttribute("data-dp"),val:s.getAttribute("data-val"),name:s.nodeName,type:s.type};this.dpElems.push(o);if(this.dps.indexOf(o.dp)==-1){this.dps.push(o.dp)}this.addHandler(s,o)}}},addHandler:function(e,t){if(!e.addEventListener){e.addEventListener=e.attachEvent;var n="on"}else{var n=""}var r=this;switch(t.name){case"SELECT":e.addEventListener(n+"change",function(){r.setValue(e.getAttribute("data-dp"),e.options[e.selectedIndex].value)},false);break;case"INPUT":switch(t.type){case"button":e.addEventListener(n+"click",function(){r.setValue(e.getAttribute("data-dp"),e.getAttribute("data-val"))},false);break;case"text":case"number":e.addEventListener(n+"change",function(){r.setValue(e.getAttribute("data-dp"),e.value)},false);break;case"checkbox":e.addEventListener(n+"click",function(t){r.setValue(e.getAttribute("data-dp"),e.checked?1:0)},false);break}break}},setValue:function(e,t){ajaxGet("/api/set/"+e+"?value="+t)},pollValues:function(){var e=this;var t=e.dps.join(",");ajaxGet("/api/getBulk/"+t+"?",function(t){for(var n=0,r=e.dpElems.length;n<r;n++){var i=e.dpElems[n];if(t[i.dp]!==undefined){e.updateElement(i,t[i.dp])}}})},updateElement:function(e,t){var n=document.getElementById(e.id);switch(e.name){case"SELECT":var r=n.getElementsByTagName("OPTION");for(var i=0,s=r.length;i<s;i++){if(r[i].value==t){n.selectedIndex=i;break}}break;case"INPUT":switch(e.type){case"text":case"number":n.value=t;break;case"checkbox":n.checked=t;break}break;case"SPAN":n.innerHTML=t;break}}};if(!Array.indexOf){Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++){if(this[t]==e){return t}}return-1}}if(typeof XMLHttpRequest==="undefined"){XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}throw new Error("This browser does not support AJAX.")}}if(typeof JSON!=="object"){JSON={}}(function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){escapable.lastIndex=0;return escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];if(a&&typeof a==="object"&&typeof a.toJSON==="function"){a=a.toJSON(e)}if(typeof rep==="function"){a=rep.call(t,e,a)}switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a){return"null"}gap+=indent;u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1){u[n]=str(n,a)||"null"}i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]";gap=o;return i}if(rep&&typeof rep==="object"){s=rep.length;for(n=0;n<s;n+=1){if(typeof rep[n]==="string"){r=rep[n];i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}else{for(r in a){if(Object.prototype.hasOwnProperty.call(a,r)){i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}";gap=o;return i}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;if(typeof JSON.stringify!=="function"){JSON.stringify=function(e,t,n){var r;gap="";indent="";if(typeof n==="number"){for(r=0;r<n;r+=1){indent+=" "}}else if(typeof n==="string"){indent=n}rep=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":e})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i==="object"){for(n in i){if(Object.prototype.hasOwnProperty.call(i,n)){r=walk(i,n);if(r!==undefined){i[n]=r}else{delete i[n]}}}}return reviver.call(e,t,i)}var j;text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();var slim=new SlimUI